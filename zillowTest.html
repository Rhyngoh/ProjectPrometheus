<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
  <title>zillow test</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
<div class="container">
  <div class="row">
    <div class="col-md-8">
    </div>
    <div class="col-md-4">
      <form>
        <div class="form-group">
          <label for="text">Enter location:</label>
          <input type="text" class="form-control" id="location">
        </div>
        <button type="submit" id="enter" class="btn btn-default">Submit</button>
      </form>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery.js"></script>
<script type="text/javascript">

//Zillow API key
var zwsid = "X1-ZWz19hcd8pk64r_5i268";

//test location
var address = "621+W+30th+ST,+Austin,+Texas+78705";

//get zpid (Zillow Property ID)
var queryURLZPID = "http://www.zillow.com/webservice/GetSearchResults.htm?zws-id="+zwsid+"&address="+address
console.log(queryURLZPID)
$.ajax({url: queryURLZPID, method: 'GET'})
  .done(function(responseZPID) {
console.log(responseZPID)
//update this from opject
var zpid=responseZPID.results.zpid;
console.log(zpid)

  //GetZestimate
  var queryURLZest = "http://www.zillow.com/webservice/GetZestimate.htm?zws-id="+zwsid+"&zpid="+zpid
  console.log(queryURLZest)
  $.ajax({url: queryURLZest, method: 'GET'})
    .done(function(responseZest) {
  console.log(responseZest)
  });

//Below is an example of calling the GetComps API for zpid 48749425 and count of 5 comps: 
//http://www.zillow.com/webservice/GetComps.htm?zws-id=<ZWSID>&zpid=48749425&count=5

  //GetComps
  var queryURLComp = "http://www.zillow.com/webservice/GetComps.htm?zws-id="+zwsid+"&zpid="+zpid+"&count=5"
  console.log(queryURLComp)
  $.ajax({url: queryURLComp, method: 'GET'})
    .done(function(responseComp) {
  console.log(responseComp)
  });

});
// end zpid

//Thank you for contacting Zillow!  API data is not available in JSON format and we do not have plans to add JSON as an option in the future.  circa 2013  XML ONLY!!

//see https://davidwalsh.name/convert-xml-json  for function

</script>
</body>

</html>
